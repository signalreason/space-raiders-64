10 REM ***************************************
20 REM *          SPACE RAIDERS 64          *
30 REM *    SIMPLE SHOOTER DEMO PROGRAM     *
40 REM ***************************************
50 POKE 53280,0:POKE 53281,0        :REM BORDER/BACKGROUND BLACK
60 PRINT CHR$(147)                  :REM CLEAR SCREEN
70 REM ----- CONSTANTS -----
80 SC=1024                          :REM SCREEN MEMORY START
90 BW=40                            :REM COLUMNS PER LINE
100 SHIPROW=22                      :REM PLAYER ROW
110 MAXALIENS=6
120 REM ----- VARIABLES -----
130 SX=20                           :REM SHIP X POSITION
140 BX=-1                           :REM BULLET X ( -1 = NONE )
150 BY=-1                           :REM BULLET Y
160 DIM AX(MAXALIENS),AY(MAXALIENS),AL(MAXALIENS)
170 SCORE=0
180 GAMEOVER=0
190 REM ----- INITIALIZE ALIENS -----
200 FOR I=1 TO MAXALIENS
210 AX(I)=I*5+5
220 AY(I)=3
230 AL(I)=1                         :REM ALIEN ALIVE FLAG
240 NEXT I
250 ADIR=1                          :REM ALIEN HORIZONTAL DIRECTION
260 TICK=0
270 REM ----- DRAW SCREEN BORDER TEXT -----
280 GOSUB 700                       :REM DRAW SCORE LINE
290 REM ----- MAIN LOOP -----
300 IF GAMEOVER=1 THEN GOTO 900
310 TICK=TICK+1
320 GOSUB 400                       :REM READ KEYBOARD AND MOVE SHIP / FIRE
330 IF TICK MOD 2=0 THEN GOSUB 500  :REM MOVE BULLET
340 IF TICK MOD 10=0 THEN GOSUB 600 :REM MOVE ALIENS
350 GOSUB 800                       :REM CHECK COLLISIONS
360 GOTO 300
370 REM ==============================
380 REM READ KEYBOARD, MOVE SHIP, FIRE
390 REM ==============================
400 A$=""
410 GET A$
420 IF A$="" THEN RETURN
430 IF A$="Z" THEN SX=SX-1
440 IF A$="X" THEN SX=SX+1
450 IF SX<1 THEN SX=1
460 IF SX>BW-2 THEN SX=BW-2
470 REM DRAW SHIP
480 GOSUB 720
490 REM FIRE BULLET ON "M"
500 IF A$<>"M" THEN RETURN
510 IF BX<>-1 THEN RETURN          :REM BULLET ALREADY ACTIVE
520 BX=SX
530 BY=SHIPROW-1
540 POKE SC+BY*BW+BX,33            :REM "!" BULLET
550 RETURN
560 REM ==============================
570 REM MOVE BULLET
580 REM ==============================
590 IF BX=-1 THEN RETURN
600 REM ERASE OLD BULLET
610 POKE SC+BY*BW+BX,32
620 BY=BY-1
630 IF BY<1 THEN BX=-1:BY=-1:RETURN
640 POKE SC+BY*BW+BX,33
650 RETURN
660 REM ==============================
670 REM MOVE ALIENS
680 REM ==============================
690 REM ERASE OLD ALIENS
700 FOR I=1 TO MAXALIENS
710 IF AL(I)=0 THEN NEXT I:GOTO 760
720 POKE SC+AY(I)*BW+AX(I),32
730 NEXT I
740 REM CHECK IF ANY ALIEN HITS EDGE
750 HITEDGE=0
760 FOR I=1 TO MAXALIENS
770 IF AL(I)=0 THEN NEXT I:GOTO 820
780 NX=AX(I)+ADIR
790 IF NX<1 OR NX>BW-2 THEN HITEDGE=1
800 NEXT I
810 IF HITEDGE=1 THEN ADIR=-ADIR:REM MOVE DOWN A ROW
820 FOR I=1 TO MAXALIENS
830 IF AL(I)=0 THEN NEXT I:GOTO 880
840 AX(I)=AX(I)+ADIR
850 IF HITEDGE=1 THEN AY(I)=AY(I)+1
860 REM DRAW ALIEN AS "A"
870 POKE SC+AY(I)*BW+AX(I),65
880 NEXT I
890 RETURN
900 REM ==============================
910 REM DRAW SCORE AND HUD
920 REM ==============================
930 REM CLEAR TOP LINE
940 FOR C=0 TO BW-1
950 POKE SC+C,32
960 NEXT C
970 S$="SCORE:"+STR$(SCORE)
980 FOR I=1 TO LEN(S$)
990 POKE SC+I-1,ASC(MID$(S$,I,1))
1000 NEXT I
1010 RETURN
1020 REM ==============================
1030 REM DRAW SHIP
1040 REM ==============================
1050 REM ERASE OLD SHIP ROW
1060 FOR C=0 TO BW-1
1070 POKE SC+SHIPROW*BW+C,32
1080 NEXT C
1090 POKE SC+SHIPROW*BW+SX,94      :REM "^" AS SHIP
1100 RETURN
1110 REM ==============================
1120 REM CHECK COLLISIONS AND GAME OVER
1130 REM ==============================
1140 REM BULLET / ALIEN COLLISION
1150 IF BX=-1 THEN GOTO 1240
1160 FOR I=1 TO MAXALIENS
1170 IF AL(I)=0 THEN NEXT I:GOTO 1240
1180 IF AY(I)<>BY THEN NEXT I:GOTO 1240
1190 IF AX(I)<>BX THEN NEXT I:GOTO 1240
1200 REM HIT
1210 AL(I)=0
1220 BX=-1:BY=-1
1230 SCORE=SCORE+10
1240 NEXT I
1250 GOSUB 700
1260 REM ALIEN HITS PLAYER ROW
1270 FOR I=1 TO MAXALIENS
1280 IF AL(I)=0 THEN NEXT I:GOTO 1330
1290 IF AY(I)>=SHIPROW THEN GAMEOVER=1
1300 NEXT I
1310 IF GAMEOVER=0 THEN RETURN
1320 REM SHOW GAME OVER MESSAGE
1330 PRINT CHR$(147)
1340 PRINT
1350 PRINT "        *** GAME OVER ***"
1360 PRINT
1370 PRINT "        FINAL SCORE:";SCORE
1380 PRINT
1390 PRINT "       PRESS RUN/STOP TO END"
1400 END
